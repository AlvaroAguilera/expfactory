machine:
  services:
    - docker
  python:
    version: 3.5.1
  environment:
    TEST_RUN_FOLDER: /tmp

dependencies:
  override:
    - docker info
    - cd expfactory/templates/build/docker/builder-ci && /bin/bash setup_build.sh
    - cd /tmp/builder && /bin/bash build.sh
  pre:
    - echo "The Experiment Factory!"
    - wget https://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh
    - /bin/bash Miniconda3-latest-Linux-x86_64.sh -b 
    - cd $HOME/expfactory && $HOME/miniconda3/bin/python setup.py install

test:
  override:
    - bash expfactory/testing/test_builder.sh
